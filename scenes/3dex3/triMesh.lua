local Mesh = {}
Mesh.__index = Mesh

local verts = { 
    --|    coords    |  tex  |  normal  |     rgba     |
    {  -.5, -.5, -.5,   0, 0,   0, 0, 0,   .8, 0, 0, 1  }, -- red side
    {   .5, -.5, -.5,   1, 0,   0, 0, 0,   .8, 0, 0, 1  },
    {   .5, -.5,  .5,   1, 1,   0, 0, 0,   .8, 0, 0, 1  },
    {  -.5, -.5, -.5,   0, 0,   0, 0, 0,   .8, 0, 0, 1  },
    {   .5, -.5,  .5,   1, 1,   0, 0, 0,   .8, 0, 0, 1  },
    {  -.5, -.5,  .5,   0, 1,   0, 0, 0,   .8, 0, 0, 1  },
    
    {  -.5, -.5, -.5,   0, 0,   0, 0, 0,   0, .8, 0, 1  }, -- green side
    {   .5, -.5, -.5,   1, 0,   0, 0, 0,   0, .8, 0, 1  },
    {   .5,  .5, -.5,   1, 1,   0, 0, 0,   0, .8, 0, 1  },
    {  -.5, -.5, -.5,   0, 0,   0, 0, 0,   0, .8, 0, 1  },
    {   .5,  .5, -.5,   1, 1,   0, 0, 0,   0, .8, 0, 1  },
    {  -.5,  .5, -.5,   0, 1,   0, 0, 0,   0, .8, 0, 1  },
    
    {   .5, -.5, -.5,   0, 0,   0, 0, 0,   0, 0, .8, 1  },  -- blue side
    {   .5, -.5,  .5,   1, 0,   0, 0, 0,   0, 0, .8, 1  },
    {   .5,  .5,  .5,   1, 1,   0, 0, 0,   0, 0, .8, 1  },
    {   .5, -.5, -.5,   0, 0,   0, 0, 0,   0, 0, .8, 1  },
    {   .5,  .5,  .5,   1, 1,   0, 0, 0,   0, 0, .8, 1  },
    {   .5,  .5, -.5,   0, 1,   0, 0, 0,   0, 0, .8, 1  },
}


function Mesh.new()
    print("new")
    local self = {}
    self.m = love.graphics.newMesh(verts, "triangles", "dynamic")
    return setmetatable(self, Mesh)
end

function Mesh:draw()
    love.graphics.draw(self.m)
end

return setmetatable({
    new = Mesh.new,
}, {__call = function(_, ...) return Mesh.new(...) end})
